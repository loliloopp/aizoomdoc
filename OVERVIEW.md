# AIZoomDoc - ะัะฐัะบะธะน ะพะฑะทะพั

## ะงัะพ ััะพ?

**AIZoomDoc** โ Python-ะฟัะธะปะพะถะตะฝะธะต ะดะปั ะธะฝัะตะปะปะตะบััะฐะปัะฝะพะณะพ ะฐะฝะฐะปะธะทะฐ ัััะพะธัะตะปัะฝัั ัะตััะตะถะตะน ั ะธัะฟะพะปัะทะพะฒะฐะฝะธะตะผ ะผัะปััะธะผะพะดะฐะปัะฝัั LLM (Large Language Models).

## ะะปะฐะฒะฝะฐั ะธะดะตั

```
ะกััะพะธัะตะปัะฝัะต ัะตััะตะถะธ (PDF)
         โ
   ะัะธะปะพะถะตะฝะธะต 1 (OCR)
         โ
result.md + annotation.json + ะธะทะพะฑัะฐะถะตะฝะธั
         โ
   AIZoomDoc (ััะพ ะฟัะธะปะพะถะตะฝะธะต)
         โ
ะะฐะฟัะพั ะฟะพะปัะทะพะฒะฐัะตะปั โ ะะพะธัะบ โ Viewport-ะบัะพะฟั โ LLM
         โ
   ะกัััะบัััะธัะพะฒะฐะฝะฝัะน ะพัะฒะตั
```

## ะะปััะตะฒัะต ะฒะพะทะผะพะถะฝะพััะธ

โ **ะขะพัะฝะฐั ะปะพะบะฐะปะธะทะฐัะธั**: ะัะฟะพะปัะทัะตั ะบะพะพัะดะธะฝะฐัั ะฑะปะพะบะพะฒ ะธะท `annotation.json`  
โ **ะฃะผะฝัะต ะบัะพะฟั**: ะะธะฝะฐะผะธัะตัะบะธะต viewport ะฒะพะบััะณ ัะตะปะตะฒะฐะฝัะฝัั ัะปะตะผะตะฝัะพะฒ  
โ **ะัะปััะธะผะพะดะฐะปัะฝะพััั**: ะัะฟัะฐะฒะปัะตั ะฒ LLM ะธ ัะตะบัั, ะธ ะธะทะพะฑัะฐะถะตะฝะธั  
โ **ะกัะฐะฒะฝะตะฝะธะต ััะฐะดะธะน**: ะะฒัะพะผะฐัะธัะตัะบะพะต ััะฐะฒะฝะตะฝะธะต ะ vs ะ  
โ **ะะตัะตัะผะธะฝะธะทะผ**: ะะธะบะฐะบะธั ัะฒัะธััะธะบ, ัะพะปัะบะพ ัะฒะฝัะต ะฟัะฐะฒะธะปะฐ  

## ะฃััะฐะฝะพะฒะบะฐ (3 ะบะพะผะฐะฝะดั)

```bash
# 1. ะฃััะฐะฝะพะฒะบะฐ ะทะฐะฒะธัะธะผะพััะตะน
pip install -r requirements.txt

# 2. ะะฐัััะพะนะบะฐ API ะบะปััะฐ
echo "OPENROUTER_API_KEY=sk-or-v1-ะฒะฐั-ะบะปัั" > .env

# 3. ะะพัะพะฒะพ!
python -m src.main "ะะฐะนะดะธ ะพะฑะพััะดะพะฒะฐะฝะธะต" --data-root ./data
```

## ะัะฟะพะปัะทะพะฒะฐะฝะธะต

### ะัะพััะพะน ะทะฐะฟัะพั

```bash
python -m src.main "ะะฐะนะดะธ ะฒัั ะฒะตะฝัะธะปััะธะพะฝะฝะพะต ะพะฑะพััะดะพะฒะฐะฝะธะต" --data-root ./data
```

### ะกัะฐะฒะฝะตะฝะธะต ััะฐะดะธะน

```bash
python -m src.main "ะกัะฐะฒะฝะธ ะฒะตะฝัะธะปััะธั" --stage-p ./data/p --stage-r ./data/r
```

## ะััะธัะตะบัััะฐ (ัะฟัะพััะฝะฝะพ)

```
โโโโโโโโโโโโโโโโโโโ
โ   result.md     โ โโโ
โโโโโโโโโโโโโโโโโโโ   โ
                      โโโ> SearchEngine
โโโโโโโโโโโโโโโโโโโ   โ         โ
โ annotation.json โ โโโ   ะะตะปะตะฒะฐะฝัะฝัะต ะฑะปะพะบะธ
โโโโโโโโโโโโโโโโโโโ              โ
                      โโโโโโโโโโโโโโโโโโโโ
โโโโโโโโโโโโโโโโโโโ   โ ImageProcessor   โ
โ page_XXX.jpg    โ โโโค                  โ
โโโโโโโโโโโโโโโโโโโ   โ Viewport-ะบัะพะฟั   โ
                      โโโโโโโโโโโโโโโโโโโโ
                               โ
                      โโโโโโโโโโโโโโโโโโโโ
                      โ   LLMClient      โ
                      โ  (OpenRouter)    โ
                      โโโโโโโโโโโโโโโโโโโโ
                               โ
                          ะัะฒะตั LLM
```

## ะัะฝะพะฒะฝัะต ะผะพะดัะปะธ

| ะะพะดัะปั | ะงัะพ ะดะตะปะฐะตั |
|--------|------------|
| `config.py` | ะะฐะณััะถะฐะตั ะฝะฐัััะพะนะบะธ ะธะท `.env` |
| `models.py` | ะกัััะบัััั ะดะฐะฝะฝัั (Block, Page, SearchResult) |
| `annotation_loader.py` | ะะฐััะธั `annotation.json` |
| `markdown_parser.py` | ะะฐััะธั `result.md` ะธ ะธะทะฒะปะตะบะฐะตั BLOCK_ID |
| `image_processor.py` | ะกะพะทะดะฐัั viewport-ะบัะพะฟั ั ะฟะพะดัะฒะตัะบะพะน |
| `search_engine.py` | ะัะตั ัะตะปะตะฒะฐะฝัะฝัั ะธะฝัะพัะผะฐัะธั |
| `llm_client.py` | ะัะฟัะฐะฒะปัะตั ะทะฐะฟัะพัั ะฒ OpenRouter API |
| `main.py` | CLI ะธะฝัะตััะตะนั |

## ะกััะฐัะตะณะธั Viewport

**ะัะพะฑะปะตะผะฐ:** ะะฐะบ ะฟะตัะตะดะฐัั ะฒ LLM ัะพะปัะบะพ ัะตะปะตะฒะฐะฝัะฝัะต ัะฐััะธ ะพะณัะพะผะฝัั ัะตััะตะถะตะน?

**ะะตัะตะฝะธะต:** ะะธะฝะฐะผะธัะตัะบะธะน ะบะพะฝัะตะบััะฝัะน ะบัะพะฟ

```
ะขัะฐะดะธัะธะพะฝะฝะฐั ัะตัะบะฐ โ          Viewport ัััะฐัะตะณะธั โ

โโโโโฌโโโโฌโโโโ                      โโโโโโโโโโโโโโโ
โ 1 โ 2 โ 3 โ                      โ   padding   โ
โโโโโผโโโโผโโโโค   vs                 โ  โโโโโโโโโ  โ
โ 4 โ 5 โ 6 โ                      โ  โtarget โ  โ
โโโโโดโโโโดโโโโ                      โ  โ block โ  โ
                                   โ  โโโโโโโโโ  โ
ะะพะถะตั ัะฐะทัะตะทะฐัั ะฑะปะพะบะธ             โ   padding   โ
                                   โโโโโโโโโโโโโโโ
                                   ะกะพััะฐะฝัะตั ะบะพะฝัะตะบัั
```

## ะคะพัะผะฐั ะดะฐะฝะฝัั

### result.md

```markdown
## ะกะฟะตัะธัะธะบะฐัะธั ะพะฑะพััะดะพะฒะฐะฝะธั

| ะะพะทะธัะธั | ะะฐะธะผะตะฝะพะฒะฐะฝะธะต | ะฅะฐัะฐะบัะตัะธััะธะบะธ |
|---------|--------------|----------------|
| 1       | ะะตะฝัะธะปััะพั   | 1000 ะผยณ/ั      |

<!-- BLOCK_ID: 550e8400-e29b-41d4-a716-446655440000 -->
ะะะ8
<!-- END_BLOCK -->
```

### annotation.json

```json
{
  "pages": [{
    "page_number": 1,
    "width": 9932,
    "height": 7015,
    "blocks": [{
      "id": "550e8400-e29b-41d4-a716-446655440000",
      "coords_px": [1234, 2345, 1456, 2456],
      "ocr_text": "ะะะ8"
    }]
  }]
}
```

## ะกะธััะตะผะฝัะน ะฟัะพะผั

LLM ัะฐะฑะพัะฐะตั ะบะฐะบ **ะธะฝะถะตะฝะตั-ะฟัะพะตะบัะธัะพะฒัะธะบ** ั ะฟัะธะฝัะธะฟะฐะผะธ:

1. **ะขะพัะฝะพััั** โ ะฝะธะบะฐะบะธั ะดะพะณะฐะดะพะบ
2. **ะะพะฝัะตัะฒะฐัะธะทะผ** โ ะปัััะต "ะฝะต ะทะฝะฐั", ัะตะผ ะฝะตะฒะตัะฝัะน ะพัะฒะตั
3. **ะกััะปะบะธ ะฝะฐ ะธััะพัะฝะธะบะธ** โ ะบะฐะถะดะพะต ััะฒะตัะถะดะตะฝะธะต ั ะธััะพัะฝะธะบะพะผ
4. **ะกัััะบัััะธัะพะฒะฐะฝะฝะพััั** โ ัััะบะธะต ัะฟะธัะบะธ ะธ ัะฐะฑะปะธัั

## ะกัะพะธะผะพััั

ะัะธะผะตัะฝะฐั ััะพะธะผะพััั ัะตัะตะท OpenRouter:

- **Gemini 2.0 Flash**: $0.01-0.05 ะทะฐ ะทะฐะฟัะพั (ัะตะบะพะผะตะฝะดัะตััั)
- **Claude 3.5 Sonnet**: $0.05-0.15 ะทะฐ ะทะฐะฟัะพั
- **GPT-4o**: $0.10-0.30 ะทะฐ ะทะฐะฟัะพั

๐ก $5 ัะฒะฐัะธั ะฝะฐ 100-500 ะทะฐะฟัะพัะพะฒ

## ะัะธะผะตัั ะทะฐะฟัะพัะพะฒ

```bash
# ะะพะธัะบ ะพะฑะพััะดะพะฒะฐะฝะธั
python -m src.main "ะะฐะนะดะธ ะฒัั ะฒะตะฝัะธะปััะธะพะฝะฝะพะต ะพะฑะพััะดะพะฒะฐะฝะธะต" --data-root ./data

# ะะพะฝะบัะตัะฝะฐั ะฟะพะทะธัะธั
python -m src.main "ะะฐะนะดะธ ะะะ8 ะฝะฐ ัะตััะตะถะฐั" --data-root ./data

# ะฅะฐัะฐะบัะตัะธััะธะบะธ
python -m src.main "ะะฐะบะพะน ัะฐััะพะด ะฒะพะทะดััะฐ ั ัััะฐะฝะพะฒะบะธ ะ1?" --data-root ./data

# ะกัะฐะฒะฝะตะฝะธะต ััะฐะดะธะน
python -m src.main "ะกัะฐะฒะฝะธ ะพะฑะพััะดะพะฒะฐะฝะธะต ะฒ ััะฐะดะธะธ ะ ะธ ะ" \
  --stage-p ./data/p --stage-r ./data/r

# ะกะพััะฐะฝะตะฝะธะต ัะตะทัะปััะฐัะฐ
python -m src.main "ะะพะปะฝัะน ะฐะฝะฐะปะธะท" --data-root ./data --output report.txt
```

## ะขะตัะฝะพะปะพะณะธัะตัะบะธะน ััะตะบ

**ะฏะทัะบ:** Python 3.12+  
**ะะธะฑะปะธะพัะตะบะธ:**
- Pillow / OpenCV โ ะพะฑัะฐะฑะพัะบะฐ ะธะทะพะฑัะฐะถะตะฝะธะน
- requests โ HTTP ะทะฐะฟัะพัั
- python-dotenv โ ะบะพะฝัะธะณััะฐัะธั

**API:** OpenRouter (ะดะพัััะฟ ะบ ัะฐะทะปะธัะฝัะผ LLM)

**ะะพะดะตะปะธ:**
- Google Gemini 2.0 Flash (ะฟะพ ัะผะพะปัะฐะฝะธั)
- Anthropic Claude 3.5 Sonnet
- OpenAI GPT-4o
- ะธ ะดััะณะธะต ัะตัะตะท OpenRouter

## Workflow

1. **ะะพะดะณะพัะพะฒะบะฐ ะดะฐะฝะฝัั** (ะดะตะปะฐะตั ะัะธะปะพะถะตะฝะธะต 1):
   - PDF โ OCR โ result.md + annotation.json + ะธะทะพะฑัะฐะถะตะฝะธั

2. **ะะฐะฟัะพั ะฟะพะปัะทะพะฒะฐัะตะปั** (ะฒะฐัะฐ ะทะฐะดะฐัะฐ):
   ```bash
   python -m src.main "ะะฐะนะดะธ X" --data-root ./data
   ```

3. **ะะฑัะฐะฑะพัะบะฐ** (ะดะตะปะฐะตั AIZoomDoc):
   - ะะพะธัะบ ะฟะพ ะบะปััะตะฒัะผ ัะปะพะฒะฐะผ
   - ะะทะฒะปะตัะตะฝะธะต block_id
   - ะกะพะทะดะฐะฝะธะต viewport-ะบัะพะฟะพะฒ
   - ะคะพัะผะธัะพะฒะฐะฝะธะต ะฟัะพะผัะฐ

4. **ะัะฒะตั LLM**:
   - ะกัััะบัััะธัะพะฒะฐะฝะฝัะน ะฐะฝะฐะปะธะท
   - ะกััะปะบะธ ะฝะฐ ะธััะพัะฝะธะบะธ
   - ะฏะฒะฝะพะต ัะบะฐะทะฐะฝะธะต ะฝะฐ ะพััััััะฒะธะต ะดะฐะฝะฝัั

## ะะณัะฐะฝะธัะตะฝะธั V1

- ะัะพััะพะน ะฟะพะธัะบ ะฟะพ ะบะปััะตะฒัะผ ัะปะพะฒะฐะผ (ะฑะตะท ัะผะฑะตะดะดะธะฝะณะพะฒ)
- ะคะธะบัะธัะพะฒะฐะฝะฝัะน ะฝะฐะฑะพั ะบะปััะตะฒัั ัะปะพะฒ ะดะปั ะฒะตะฝัะธะปััะธะธ
- ะะตั ะฟะตััะธััะตะฝัะฝะพะณะพ ััะฐะฝะธะปะธัะฐ
- ะะตั ะบััะธัะพะฒะฐะฝะธั

**ะะปะฐะฝั V2:**
- ะะตะบัะพัะฝัะน ะฟะพะธัะบ
- HTTP API (FastAPI)
- ะััะธัะพะฒะฐะฝะธะต viewport
- ะะฐััะธััะตะผัะต ะบะฐัะตะณะพัะธะธ ะฟะพะธัะบะฐ

## ะกัััะบัััะฐ ะฟัะพะตะบัะฐ

```
aizoomdoc/
โโโ src/                 # ะััะพะดะฝัะน ะบะพะด
โ   โโโ config.py
โ   โโโ models.py
โ   โโโ annotation_loader.py
โ   โโโ markdown_parser.py
โ   โโโ image_processor.py
โ   โโโ search_engine.py
โ   โโโ llm_client.py
โ   โโโ main.py
โโโ data/                # ะัะพะดะฝัะต ะดะฐะฝะฝัะต
โโโ scripts/             # ะกะบัะธะฟัั ัััะฐะฝะพะฒะบะธ
โโโ requirements.txt     # ะะฐะฒะธัะธะผะพััะธ
โโโ .env                 # ะะพะฝัะธะณััะฐัะธั (ะะ ะฒ git!)
โโโ *.md                 # ะะพะบัะผะตะฝัะฐัะธั
```

## ะะพะบัะผะตะฝัะฐัะธั

| ะคะฐะนะป | ะกะพะดะตัะถะฐะฝะธะต |
|------|------------|
| `README.md` | ะัะฝะพะฒะฝะฐั ะดะพะบัะผะตะฝัะฐัะธั |
| `QUICKSTART.md` | ะัััััะน ััะฐัั (20 ะผะธะฝัั) |
| `ARCHITECTURE.md` | ะะตัะฐะปัะฝะฐั ะฐััะธัะตะบัััะฐ |
| `USAGE_EXAMPLES.md` | ะัะธะผะตัั ะธัะฟะพะปัะทะพะฒะฐะฝะธั |
| `SYSTEM_PROMPT.md` | ะกะธััะตะผะฝัะน ะฟัะพะผั ะดะปั LLM |
| `PROJECT_STRUCTURE.md` | ะกัััะบัััะฐ ะฟัะพะตะบัะฐ |
| `CONTRIBUTING.md` | ะัะบะพะฒะพะดััะฒะพ ะดะปั ัะฐะทัะฐะฑะพััะธะบะพะฒ |
| `OVERVIEW.md` | ะญัะพั ัะฐะนะป (ะบัะฐัะบะธะน ะพะฑะทะพั) |

## ะัััััะน ััะฐัั

### 1. ะฃััะฐะฝะพะฒะบะฐ

```bash
python -m venv venv
venv\Scripts\activate  # Windows
source venv/bin/activate  # Linux/Mac
pip install -r requirements.txt
```

### 2. ะะพะฝัะธะณััะฐัะธั

ะกะพะทะดะฐะนัะต `.env`:

```env
OPENROUTER_API_KEY=sk-or-v1-ะฒะฐั-ะบะปัั
DEFAULT_MODEL=google/gemini-2.0-flash-thinking-exp
VIEWPORT_SIZE=2048
DATA_ROOT=./data
LOG_LEVEL=INFO
```

### 3. ะะพะดะณะพัะพะฒะบะฐ ะดะฐะฝะฝัั

ะะพะผะตััะธัะต ะฒ `data/`:
- `result.md`
- `annotation.json`
- `page_XXX_full.jpg`

### 4. ะะฐะฟััะบ

```bash
python -m src.main "ะะฐะนะดะธ ะฒะตะฝัะธะปััะธะพะฝะฝะพะต ะพะฑะพััะดะพะฒะฐะฝะธะต" --data-root ./data
```

## ะะพะดะดะตัะถะบะฐ

๐ **ะะพะบัะผะตะฝัะฐัะธั**: ะกะผ. `README.md`, `QUICKSTART.md`  
๐ **Issues**: ะกะพะทะดะฐะนัะต issue ะฒ ัะตะฟะพะทะธัะพัะธะธ  
๐ฌ **ะะพะฟัะพัั**: ะกะผ. ัะฐะทะดะตะป FAQ ะฒ `README.md`  

## ะะธัะตะฝะทะธั

ะัะพะตะบั ัะพะทะดะฐะฝ ะดะปั ะฒะฝัััะตะฝะฝะตะณะพ ะธัะฟะพะปัะทะพะฒะฐะฝะธั.

---

**ะะตััะธั:** 1.0.0  
**ะขัะตะฑะพะฒะฐะฝะธั:** Python 3.12+  
**ะกัะฐััั:** Production Ready (V1)

